import{r as l,j as e}from"./index-DovU7ccc.js";import{u as h}from"./App-WeSRAXyW.js";function g(){let{register:t,handleSubmit:i,formState:{errors:m}}=h(),[s,n]=l.useState([]),[d,o]=l.useState(!1),[x,u]=l.useState({});async function c(){let r=await(await fetch("http://localhost:3000/users")).json();n(r)}l.useEffect(()=>{c()},[]);async function j(a){try{await fetch(`http://localhost:3000/users/${a}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),c()}catch(r){console.log("err in Read:",r)}}return s.length===0?e.jsx("h1",{className:"text-center",children:"No Data is Found"}):e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-light",children:"User-Details"}),e.jsxs("table",{className:"table table-bordered table-striped table-hover table-dark text-white w-75 mx-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-danger",children:"UserName"}),e.jsx("th",{className:"text-danger ",children:"Email"}),e.jsx("th",{className:"text-danger",children:"DateOfBirth"}),e.jsx("th",{className:"text-danger",children:"Edit"}),e.jsx("th",{className:"text-danger",children:"Delete"})]})}),e.jsx("tbody",{children:s.map((a,r)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("i",{children:a.username})}),e.jsx("td",{children:e.jsx("i",{children:a.emailid})}),e.jsx("td",{children:e.jsx("i",{children:a.dob})}),e.jsx("td",{children:e.jsx("button",{className:"btn",onClick:()=>{o(!0),u(a)},children:"🔃"})}),e.jsx("td",{children:e.jsx("button",{className:"btn",onClick:()=>j(a.id),children:"❌"})})]},r))})]}),d&&e.jsx(b,{obj:x,set:o,disp:c})]})}function b(t){console.log(t.obj);let{register:i,handleSubmit:m,formState:{errors:s}}=h({defaultValues:t.obj});function n(d){f(d),t.set(!1),t.disp()}return e.jsx("div",{className:"editForm relative",children:e.jsxs("form",{className:"form bg-dark  text-white p-4 rounded-2",onSubmit:m(n),children:[e.jsx("button",{className:"btn border text-white float-end",onClick:()=>setIsEditUser(!1),children:"×"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{htmlFor:"username",className:"form-label",children:"username"}),e.jsx("input",{type:"text",id:"username",...i("username",{required:!0,minLength:4,maxLength:10}),placeholder:"Enter UserName",className:"form-control"}),s.username?.type==="required"&&e.jsx("p",{className:"text-danger",children:"UserName is required"}),s.username?.type==="minLength"&&e.jsx("p",{className:"text-danger",children:"minimun length of userName is:4"}),s.username?.type==="maxLength"&&e.jsx("p",{className:"text-danger",children:"maximum length of userName is:10"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{htmlFor:"emailid",className:"form-label",children:"Email"}),e.jsx("input",{type:"email",id:"emailid",...i("emailid",{required:!0}),placeholder:"Enter Email",className:"form-control"}),s.emailid?.type==="required"&&e.jsx("p",{className:"text-danger",children:"Email is Required"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{htmlFor:"dob",className:"form-label",children:"Choose DOB"}),e.jsx("input",{type:"date",className:"form-control",id:"dob",...i("dob",{required:!0})}),s.dob?.type==="required"&&e.jsx("p",{className:"text-danger",children:"Date of Birth id Required"})]}),e.jsx("button",{className:"btn btn-success mt-2",type:"submit",children:"Submit"})]})})}async function f(t){await fetch(`http://localhost:3000/users/${t.id}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}export{g as default};
